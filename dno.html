<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Voltempo Navigation & DNO Look‑Up</title>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600&display=swap" rel="stylesheet">
  <style>
    :root {
      --navy: #0d223f;
      --navy-2: #142d53;
      --teal: #00c4d6;
      --green: #26d37b;
      --white: #ffffff;
      --color-border: #8fa0b8;
      --color-primary: var(--teal);
      --color-primary-dark: #009cab;
    }

    * { box-sizing:border-box; }
    body {
      font-family: 'Poppins', sans-serif;
      background: var(--navy);
      color: var(--white);
      padding: 40px 20px;
      text-align: center;
    }
    h1 {
      font-size: 2rem;
      margin-bottom: 30px;
      color: var(--teal);
    }
    img.logo {
      max-height: 100px;
      margin-bottom: 20px;
    }

    #dno-lookup { padding: 4rem 0; }
    #dno-lookup .section-title {
      text-align: center;
      font-size: 2rem;
      margin-bottom: 2rem;
      color: var(--green);
    }
    #dno-lookup .form-group { margin-bottom: 1.5rem; text-align:left; }
    #dno-lookup label { display:block; margin-bottom:0.25rem; font-weight:600; }
    #dno-lookup .input {
      width: 100%;
      padding: 0.75rem;
      border: 1px solid var(--color-border);
      border-radius: 0.375rem;
      font-size: 1rem;
    }
    #dno-lookup .btn {
      display:inline-block;
      padding:0.75rem 1.5rem;
      background:linear-gradient(135deg,var(--teal),var(--green));
      color:#fff;
      border:none;
      border-radius:30px;
      cursor:pointer;
      font-size:1rem;
      font-weight:600;
      transition:opacity 0.3s;
      margin-top: 1.5rem;
    }
    #dno-lookup .btn:hover { opacity:0.9; }
    #dno-details p { margin:0.25rem 0; }
    #dno-details a { color:var(--teal); text-decoration:underline; }
  </style>
</head>
<body>
  <img src="https://voltempo.com/wp-content/uploads/2024/12/logo-svg-2048x508.png" alt="Voltempo Logo" class="logo" />
  

  <!-- DNO Look‑Up Component -->
  <section id="dno-lookup" class="section dno-lookup bg-light">
    <div class="container" style="max-width:480px;margin:0 auto;">
      <h2 class="section-title">DNO Look-Up</h2>

      <form id="dno-form" class="dno-form">
        <div class="form-group">
          <label for="postcode">Postcode</label>
          <input type="text" id="postcode" class="input" placeholder="e.g. B68 9QP" required />
        </div>

        <div class="form-group">
          <label for="dno">Distribution Network Operator</label>
          <input type="text" id="dno" class="input" placeholder="DNO will appear here" readonly />
        </div>

        <button type="submit" class="btn">Find DNO</button>
      </form>

      <div id="dno-details" style="margin-top:1.5rem;text-align:left;"></div>

      <a href="index.html" class="btn" style="margin-top:2rem; display:inline-block; text-decoration:none;">Back</a>
    </div>
  </section>

  <script>
  (async () => {
    const form          = document.getElementById('dno-form');
    const postcodeField = document.getElementById('postcode');
    const dnoField      = document.getElementById('dno');
    const dnoDetails    = document.getElementById('dno-details');

    const contactDetails = {
      'UK Power Networks': {
        phone: '0800 316 3105',
        emergency: '105',
        website: 'https://www.ukpowernetworks.co.uk',
        email: 'info@ukpowernetworks.co.uk'
      },
      'National Grid ED': {
        phone: '0800 6783 105',
        emergency: '105',
        website: 'https://www.nationalgrid.co.uk',
        email: 'info@nationalgrid.co.uk'
      },
      'SSEN': {
        phone: '0800 048 3516',
        emergency: '105',
        website: 'https://www.ssen.co.uk',
        email: 'network.enquiries@sse.com'
      },
      'SP Energy Networks': {
        phone: '0330 1010 222',
        emergency: '105',
        website: 'https://www.spenergynetworks.co.uk',
        email: 'customercare@spenergynetworks.com'
      },
      'Northern Powergrid': {
        phone: '0800 011 3332',
        emergency: '105',
        website: 'https://www.northernpowergrid.com',
        email: 'contact@northernpowergrid.com'
      },
      'Electricity North West': {
        phone: '0800 195 4141',
        emergency: '105',
        website: 'https://www.enwl.co.uk',
        email: 'customerrelations@enwl.co.uk'
      }
    };

    const fallbackMap = {
      'E':'UK Power Networks','EC':'UK Power Networks','N':'UK Power Networks','NW':'UK Power Networks','SE':'UK Power Networks','SW':'UK Power Networks','W':'UK Power Networks','WC':'UK Power Networks',
      'BR':'UK Power Networks','CR':'UK Power Networks','DA':'UK Power Networks','ME':'UK Power Networks','CT':'UK Power Networks','TN':'UK Power Networks','CB':'UK Power Networks','CO':'UK Power Networks','IP':'UK Power Networks','NR':'UK Power Networks','CM':'UK Power Networks','SS':'UK Power Networks',
      'B':'National Grid ED','CV':'National Grid ED','DY':'National Grid ED','GL':'National Grid ED','HR':'National Grid ED','LE':'National Grid ED','LN':'National Grid ED','NG':'National Grid ED','WR':'National Grid ED','WS':'National Grid ED','WV':'National Grid ED','BS':'National Grid ED','BA':'National Grid ED','EX':'National Grid ED','PL':'National Grid ED','TA':'National Grid ED','CF':'National Grid ED','NP':'National Grid ED','SA':'National Grid ED',
      'AB':'SSEN','DD':'SSEN','FK':'SSEN','IV':'SSEN','KW':'SSEN','KY':'SSEN','PA':'SSEN','PH':'SSEN','BH':'SSEN','BN':'SSEN','GU':'SSEN','PO':'SSEN','RG':'SSEN','RH':'SSEN','SN':'SSEN','SO':'SSEN','SP':'SSEN',
      'EH':'SP Energy Networks','G':'SP Energy Networks','KA':'SP Energy Networks','ML':'SP Energy Networks','DG':'SP Energy Networks','CH':'SP Energy Networks','L':'SP Energy Networks','LL':'SP Energy Networks',
      'DH':'Northern Powergrid','DL':'Northern Powergrid','NE':'Northern Powergrid','SR':'Northern Powergrid','TS':'Northern Powergrid','YO':'Northern Powergrid','DN':'Northern Powergrid','HD':'Northern Powergrid','HG':'Northern Powergrid','HU':'Northern Powergrid','HX':'Northern Powergrid','LS':'Northern Powergrid','S':'Northern Powergrid','WF':'Northern Powergrid',
      'BB':'Electricity North West','BL':'Electricity North West','CA':'Electricity North West','FY':'Electricity North West','LA':'Electricity North West','M':'Electricity North West','OL':'Electricity North West','PR':'Electricity North West','SK':'Electricity North West','WA':'Electricity North West','WN':'Electricity North West'
    };

    async function getDNO(postcode) {
      const clean = postcode.replace(/\s+/g, '').toUpperCase();
      if (!clean) return 'Unknown';

      try {
        const res = await fetch(`https://api.energynetworks.org/postcode/${clean}`);
        if (res.ok) {
          const json = await res.json();
          const name = json?.networkOperator?.name;
          if (name) return name;
        }
      } catch (err) {
        console.warn('ENA API failed – using fallback', err);
      }

      const area = clean.match(/^[A-Z]{1,2}/)?.[0] ?? '';
      return fallbackMap[area] || 'Unknown';
    }

    form.addEventListener('submit', async (e) => {
      e.preventDefault();
      dnoField.value = 'Looking up…';
      dnoDetails.innerHTML = '';

      const postcode = postcodeField.value.trim();
      const dnoName  = await getDNO(postcode);

      dnoField.value = dnoName;

      const info = contactDetails[dnoName];
      if (info) {
        dnoDetails.innerHTML = `
          <p><strong>Phone:</strong> ${info.phone}</p>
          <p><strong>Emergency (105):</strong> ${info.emergency}</p>
          <p><strong>Email:</strong> <a href="mailto:${info.email}">${info.email}</a></p>
          <p><strong>Website:</strong> <a href="${info.website}" target="_blank" rel="noopener">${info.website}</a></p>
        `;
      } else {
        dnoDetails.innerHTML = '<p>No contact details available for this region.</p>';
      }
    });
  })();
  </script>
</body>
</html>
